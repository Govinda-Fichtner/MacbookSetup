---
# MCP Server Registry Configuration
# Centralized configuration for all MCP (Model Context Protocol) servers
# Supports both registry images and local repository builds

servers:
  github:
    name: GitHub MCP Server
    description: "GitHub repository management and code analysis"
    category: "code"
    source:
      type: registry
      image: mcp/github-mcp-server:latest
    environment_variables:
      - "GITHUB_TOKEN"
      - "GITHUB_PERSONAL_ACCESS_TOKEN"
    health_test:
      parse_mode: json
      path: "/health"
      expected_status: 200
      expected_response:
        status: "ok"
    capabilities:
      - "repository_management"
      - "issue_tracking"
      - "pull_requests"
      - "code_search"

  circleci:
    name: CircleCI MCP Server
    description: "CircleCI pipeline monitoring and management"
    category: "cicd"
    source:
      type: build
      repository: https://github.com/CircleCI-Public/mcp-server-circleci.git
      image: local/mcp-server-circleci:latest
      build_context: "."
    environment_variables:
      - "CIRCLECI_TOKEN"
      - "CIRCLECI_BASE_URL"
    health_test:
      parse_mode: json
      path: "/health"
      expected_status: 200
      expected_response:
        status: "ok"
    capabilities:
      - "pipeline_monitoring"
      - "job_management"
      - "artifact_access"
      - "environment_variables"

  inspector:
    name: "MCP Inspector"
    description: "Official Model Context Protocol visual testing and debugging tool"
    category: "development"
    source:
      type: registry
      image: "mcp/inspector:latest"  # Official MCP Inspector containerized
    ports:
      - "6274:6274"  # MCPI client UI
      - "6277:6277"  # MCPP proxy server
    networks:
      - "mcp-network"
    environment_variables:
      - "MCP_AUTO_OPEN_ENABLED"
      - "CLIENT_PORT"
      - "SERVER_PORT"
      - "MCP_SERVER_REQUEST_TIMEOUT"
    health_test:
      parse_mode: direct
      path: "/"
      expected_status: 200
      expected_response: "<!DOCTYPE html>"  # HTML response from UI
    capabilities:
      - "visual_testing"
      - "server_debugging"
      - "protocol_inspection"
      - "configuration_export"
      - "cli_mode"

  filesystem:
    name: "Filesystem MCP Server"
    description: "Official Anthropic filesystem operations server for local file management"
    category: "filesystem"
    source:
      type: registry
      image: "mcp/filesystem:latest"
    environment_variables:
      - "FILESYSTEM_ALLOWED_DIRS"
    health_test:
      parse_mode: json
      path: "/health"
      expected_status: 200
      expected_response:
        status: "ok"
    capabilities:
      - "file_operations"
      - "directory_management"
      - "file_search"
      - "file_metadata"
      - "secure_access"

  # Future servers (commented for future expansion):
  # figma:
  #   name: "Figma MCP Server"
  #   description: "Design collaboration and asset management"
  #   category: "design"
  #   source:
  #     type: "registry"
  #     image: "mcp/figma-mcp-server:latest"
  #   environment_variables:
  #     - "FIGMA_TOKEN"
  #   health_test:
  #     parse_mode: "direct"
  #     timeout: 30

  # linear:
  #   name: "Linear MCP Server"
  #   description: "Project management and issue tracking"
  #   category: "project_management"
  #   source:
  #     type: "registry"
  #     image: "mcp/linear-mcp-server:latest"
  #   environment_variables:
  #     - "LINEAR_API_KEY"
  #   health_test:
  #     parse_mode: "direct"
  #     timeout: 30

# Global MCP configuration
global:
  build_directory: "./mcp_builds"
  # config_path: Legacy - now using --env-file approach
  network_name: "mcp-network"
  default_timeout: 30
